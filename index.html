<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Postcards From My Jungle</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;600;700&family=Fraunces:opsz,wght@9..144,300;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color-scheme: light;
        --bg: #0f1a12;
        --bg-2: #142417;
        --accent: #f1c86b;
        --accent-2: #89b48d;
        --paper: #f7f1e3;
        --ink: #10140f;
        --muted: #9aa79b;
        --card: #1b2a1c;
        --glow: rgba(241, 200, 107, 0.35);
        --shadow: 0 25px 60px rgba(0, 0, 0, 0.35);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Archivo", system-ui, sans-serif;
        background: radial-gradient(circle at top left, #152215 0%, #0a120c 45%, #050a06 100%);
        color: var(--paper);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        position: relative;
        overflow-x: hidden;
      }

      body::before,
      body::after {
        content: "";
        position: fixed;
        inset: -20% -10%;
        z-index: -1;
        pointer-events: none;
      }

      body::before {
        background: radial-gradient(circle at 18% 12%, rgba(60, 210, 140, 0.18), transparent 40%),
          radial-gradient(circle at 82% 18%, rgba(120, 200, 255, 0.16), transparent 44%),
          radial-gradient(circle at 70% 80%, rgba(241, 200, 107, 0.18), transparent 50%),
          linear-gradient(110deg, rgba(10, 18, 12, 0.95), rgba(4, 7, 6, 0.98));
        filter: blur(0);
      }

      body::after {
        background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05), transparent 60%),
          linear-gradient(
            90deg,
            rgba(90, 255, 180, 0.08) 0%,
            rgba(90, 255, 180, 0.08) 1px,
            transparent 1px,
            transparent 80px
          ),
          linear-gradient(
            0deg,
            rgba(90, 255, 180, 0.06) 0%,
            rgba(90, 255, 180, 0.06) 1px,
            transparent 1px,
            transparent 80px
          ),
          repeating-linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.02) 0px,
            rgba(255, 255, 255, 0.02) 2px,
            transparent 2px,
            transparent 7px
          );
        opacity: 0.4;
      }

      .page {
        width: min(1200px, 92vw);
        padding: 42px 0 80px;
        display: flex;
        flex-direction: column;
        gap: 36px;
        position: relative;
        z-index: 1;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 24px;
      }

      .title-block h1 {
        font-family: "Fraunces", serif;
        font-weight: 700;
        font-size: clamp(2.4rem, 4vw, 4rem);
        letter-spacing: -0.02em;
        color: var(--accent);
      }

      .title-block p {
        margin-top: 10px;
        max-width: 520px;
        color: var(--muted);
        font-size: 1.2rem;
        line-height: 1.6;
      }

      .controls {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .btn {
        border: 1px solid rgba(241, 200, 107, 0.5);
        background: rgba(15, 26, 18, 0.7);
        color: var(--paper);
        padding: 14px 22px;
        font-size: 1rem;
        border-radius: 999px;
        cursor: pointer;
        transition: 0.2s ease;
      }

      .btn:hover {
        transform: translateY(-2px);
        border-color: var(--accent);
        box-shadow: 0 10px 18px rgba(0, 0, 0, 0.3);
      }

      .hero {
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 18px;
      }

      .hero-image {
        position: relative;
        border-radius: 24px;
        overflow: hidden;
        background: #0d1711;
        box-shadow: var(--shadow);
        min-height: 420px;
      }

      .hero-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        filter: saturate(1.1) contrast(1.05);
      }

      .start-overlay {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
        background: radial-gradient(circle, rgba(15, 26, 18, 0.5) 0%, rgba(15, 26, 18, 0.85) 60%);
        z-index: 2;
      }

      .start-overlay.hidden {
        display: none;
      }

      .start-overlay button {
        border: 1px solid rgba(241, 200, 107, 0.6);
        background: rgba(15, 26, 18, 0.8);
        color: var(--paper);
        padding: 16px 28px;
        font-size: 1.05rem;
        border-radius: 999px;
        cursor: pointer;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        transition: 0.2s ease;
      }

      .start-overlay button:hover {
        transform: translateY(-2px);
        border-color: var(--accent);
        box-shadow: 0 10px 18px rgba(0, 0, 0, 0.35);
      }

      .hero-caption {
        position: absolute;
        bottom: 20px;
        left: 20px;
        right: 20px;
        padding: 16px 20px;
        background: rgba(15, 26, 18, 0.65);
        border: 1px solid rgba(241, 200, 107, 0.3);
        border-radius: 16px;
        backdrop-filter: blur(6px);
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .hero-caption span {
        font-size: 0.85rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: var(--accent-2);
      }

      .hero-caption strong {
        font-family: "Fraunces", serif;
        font-size: 1.6rem;
        color: var(--paper);
      }

      .animal-language {
        padding: 18px 22px;
        border-radius: 18px;
        background: rgba(247, 241, 227, 0.08);
        font-size: clamp(1.4rem, 2.2vw, 1.9rem);
        letter-spacing: 0.08em;
        border: 1px dashed rgba(241, 200, 107, 0.4);
        min-height: 64px;
        display: grid;
        align-items: center;
      }

      .gallery {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 18px;
      }

      .thumb {
        position: relative;
        border-radius: 18px;
        overflow: hidden;
        background: var(--card);
        cursor: pointer;
        border: 1px solid rgba(255, 255, 255, 0.08);
        transition: 0.25s ease;
      }

      .thumb img {
        width: 100%;
        height: 180px;
        object-fit: cover;
        display: block;
        transition: transform 0.3s ease, filter 0.3s ease;
      }

      .thumb:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 30px rgba(0, 0, 0, 0.35);
        border-color: rgba(241, 200, 107, 0.5);
      }

      .thumb:hover img {
        transform: scale(1.05);
        filter: saturate(1.2);
      }

      .thumb .label {
        position: absolute;
        bottom: 10px;
        left: 10px;
        right: 10px;
        background: rgba(16, 20, 15, 0.7);
        color: var(--paper);
        padding: 6px 10px;
        border-radius: 12px;
        font-size: 0.85rem;
      }

      .thumb .phrase {
        position: absolute;
        top: 10px;
        left: 10px;
        right: 10px;
        background: rgba(15, 26, 18, 0.7);
        color: var(--accent);
        padding: 6px 10px;
        border-radius: 12px;
        font-size: 0.78rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
      }


      @media (max-width: 900px) {
        header {
          flex-direction: column;
          align-items: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <header>
        <div class="title-block">
          <h1>Postcards From My Jungle</h1>
          <p>
            A lo-fi, GenAI-imagined rainforest archive. Each sighting speaks in a
            fictional animal language, scored by ambient field recordings.
          </p>
        </div>
        <div class="controls">
          <button class="btn" id="muteToggle">Mute</button>
        </div>
      </header>

      <section class="hero">
        <div class="hero-image">
          <img id="heroImage" src="" alt="Jungle animal" />
          <div class="start-overlay" id="startOverlay">
            <button type="button" id="startToggle">Start</button>
          </div>
          <div class="hero-caption">
            <span>Focus Log</span>
            <strong id="heroTitle">Loading...</strong>
          </div>
        </div>
        <div class="animal-language" id="animalLanguage">Listening...</div>
      </section>

      <section>
        <h2 style="font-family: 'Fraunces', serif; margin-bottom: 12px;">
          Field Gallery
        </h2>
        <div class="gallery" id="gallery"></div>
      </section>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
      const images = Array.from({ length: 50 }, (_, index) => {
        const label = String(index).padStart(2, "0");
        return `images/animal_${label}.png`;
      });

      const sounds = [
        "sounds/sound_1.wav",
        "sounds/sound_2.wav",
        "sounds/sound_3.wav",
        "sounds/sound_4.wav",
      ];

      const fallbackPhrases = [
        "ka-taar shivoo minski",
        "vrunak-latu kri-sheel",
        "ziraipa-too rraw lekshi",
        "thraa degi lom shikko",
        "katap dunny hohr sal",
        "priisha kerom ruunday",
        "sayurra chit nik dralla",
        "truvi gamuk fih fasun",
        "blitch mazo gavan sik",
        "shtarra bim kutérence",
        "nichum spla vekat drik",
        "chagai kuk sa-tpringo",
        "fautra ika moonts hemmu",
        "ofrael suniva trastu dog",
        "yuun dusthra kévin blue",
        "delvu soru maw tinsloo",
      ];

      let animalPhrases = [];

      const heroImage = document.getElementById("heroImage");
      const heroTitle = document.getElementById("heroTitle");
      const animalLanguage = document.getElementById("animalLanguage");
      const audioPlayer = document.getElementById("audioPlayer");
      const gallery = document.getElementById("gallery");
      const startOverlay = document.getElementById("startOverlay");
      const startToggle = document.getElementById("startToggle");
      const muteToggle = document.getElementById("muteToggle");

      const imageSounds = images.map(() => {
        const count = Math.random() < 0.4 ? 2 : 1;
        const shuffled = sounds.slice().sort(() => 0.5 - Math.random());
        return shuffled.slice(0, count);
      });

      const slideshowOrder = images.map((_, index) => index).sort(() => 0.5 - Math.random());
      let currentIndex = 0;
      let currentSoundIndex = 0;
      let audioEnabled = false;
      function formatAnimalLabel(index) {
        return `Animal ${String(index + 1).padStart(2, "0")}`;
      }

      function getAnimalPhrase(index) {
        const source = animalPhrases.length ? animalPhrases : fallbackPhrases;
        return source[index % source.length];
      }

      async function loadPhrases() {
        try {
          const response = await fetch("phrases.json");
          if (!response.ok) {
            throw new Error("Failed to load phrases.json");
          }
          const data = await response.json();
          if (Array.isArray(data) && data.length) {
            animalPhrases = data;
          }
        } catch (error) {
          animalPhrases = [];
        }
      }

      function playCurrentSound() {
        if (!audioEnabled) {
          return;
        }
        const trackList = imageSounds[currentIndex];
        const track = trackList[currentSoundIndex];
        audioPlayer.src = track;
        audioPlayer.play().catch(() => {});
      }

      function updateHero() {
        const imageIndex = slideshowOrder[currentIndex];
        heroImage.src = images[imageIndex];
        heroTitle.textContent = formatAnimalLabel(imageIndex);
        animalLanguage.textContent = getAnimalPhrase(imageIndex);
        playCurrentSound();
        preloadNextImage();
      }

      function preloadNextImage() {
        const nextIndex = (currentIndex + 1) % images.length;
        const nextImage = new Image();
        nextImage.src = images[slideshowOrder[nextIndex]];
      }

      function advance() {
        const trackList = imageSounds[currentIndex];
        if (currentSoundIndex < trackList.length - 1) {
          currentSoundIndex += 1;
        } else {
          currentIndex = (currentIndex + 1) % images.length;
          currentSoundIndex = 0;
        }
        updateHero();
      }

      audioPlayer.addEventListener("ended", advance);

      startToggle.addEventListener("click", () => {
        audioEnabled = true;
        playCurrentSound();
        startOverlay.classList.add("hidden");
      });

      muteToggle.addEventListener("click", () => {
        audioPlayer.muted = !audioPlayer.muted;
        muteToggle.textContent = audioPlayer.muted ? "Unmute" : "Mute";
      });

      function buildGallery() {
        gallery.innerHTML = "";
        images.forEach((src, index) => {
          const card = document.createElement("button");
          card.className = "thumb";
          card.type = "button";
          card.innerHTML = `
            <img src="${src}" alt="Gallery animal ${index + 1}" />
            <div class="phrase">${getAnimalPhrase(index)}</div>
            <div class="label">${formatAnimalLabel(index)}</div>
          `;
          card.addEventListener("click", () => {
            currentIndex = slideshowOrder.indexOf(index);
            currentSoundIndex = 0;
            updateHero();
          });
          gallery.appendChild(card);
        });
      }

      async function init() {
        await loadPhrases();
        buildGallery();
        updateHero();
      }

      init();
    </script>
  </body>
</html>
